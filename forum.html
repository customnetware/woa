<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title></title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js" type="text/javascript"></script>
    <script src="https://www.ourwoodbridge.net/Assets/Libs/BootStrap/4.0.0-alpha/dist/js/bootstrap.min.js"></script>
    <link href="https://www.ourwoodbridge.net/Assets/Libs/BootStrap/4.0.0-alpha/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
    <link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet'>
    <style>
        @import url(https://unpkg.com/@webpixels/css@1.1.5/dist/index.css);
        @import url("https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.4.0/font/bootstrap-icons.min.css");
    </style>
</head>
<body>
    <div id="event"></div>
    <script>
      
        $(window).load(function () {
            getGroups()
        })


        function getGroups() {
            let selectedGroups = []
            let fileLocation = (window.location.hostname == "localhost") ? "/Discussion/list/28118/discussion-groups.html" : "/Discussion/list/28118/discussion-groups"
            $.get(fileLocation, function () { })
                .done(function (responseText) {
                    let forums = new DOMParser().parseFromString(responseText, "text/html")
                    let forumName = forums.getElementsByClassName("clsBodyText")
                    let groupCheck = "(Group is included on My Woodbridge)"
                    for (let p = 2; p < forumName.length; p += 2) {
                        let includeGroup = forumName[p].innerText.includes(groupCheck)
                        if (includeGroup == true) {
                            let groupID = forumName[p - 1].getElementsByTagName("a")[0].id.replace("titleEditForum", "")
                            let groupName = forumName[p - 1].innerText
                            selectedGroups.push(groupID+"|"+groupName)
                        }
                    }
                    testFunction(selectedGroups)
                })
        }


        function testFunction(groups) { alert(groups[0]) }
    </script>
</body>
</html>      