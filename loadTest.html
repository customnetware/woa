<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title></title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js" type="text/javascript"></script>
    <script src="scripts/bootstrap.min.js"></script>
    <link href="css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
    <link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet'>
</head>
<body>
    <div class="container"><div id="docs"></div></div>
    <script>

        let localExt = (window.location.hostname == "localhost") ? ".html" : ""
        let doclink = "/ResourceCenter/Download/28118?doc_id=0000000&print=1&view=1"
        let folderID = "540434"
        $.get("/resourcecenter/28118/resource-center" + localExt, function () { })
            .done(function (responseText) {
                let documents = new DOMParser().parseFromString(responseText, "text/html")
                let allDocuments = documents.getElementsByClassName("clsTree")[0]
                document.getElementById("docs").innerHTML = allDocuments.innerHTML.replaceAll("AV.ResourceCenter.showHideRC", "showDoc")

                return

                let portalDocuments = documents.getElementById("contents" + folderID).parentElement
                let pageDocuments = document.getElementById("docs")
                pageDocuments.innerHTML = portalDocuments.innerHTML
                pageDocuments.getElementsByTagName("a")[0].href = "https://ourwoodbridge.net/ResourceCenter/28118~" + folderID

                document.getElementById("contents" + folderID).style.display = ""
                document.getElementById("contents" + folderID).getElementsByClassName("clsBodyText")[0].style.display = "none"

                document.getElementById("folder" + folderID).src = "/images/icons/icon-folder-open.png"
                document.getElementById("treecontents" + folderID).src = "/Assets/Modules/ResourceCenter/Images/t-min-mid.gif"
                document.getElementById("lnkEditFolder" + folderID).style.display = "none"

                let selectedDocs = document.getElementById("contents" + folderID).getElementsByClassName("clsTreeNde")
                for (let d = 0; d < selectedDocs.length; d++) {
                    selectedDocs[d].parentElement.href = doclink.replace("0000000", selectedDocs[d].id.replace("d", ""))
                }
            })
        function showDoc(docID, CID) { alert(docID) }
        /* document.getElementById("docs").children[0].children[0].href = document.getElementById("docs").children[0].children[0].href*/
        //let docArray = []
        //let allDocs = documents.getElementById("contents" + folderID).getElementsByTagName("span")
        //for (let d = 0; d < allDocs.length; d++) {
        //    if (allDocs[d].id.charAt(0) == "d") {
        //        docArray.push(allDocs[d].id)
        //    }
        //}

        //docArray.sort((a, b) => { return a.postSort - b.postSort })
        //docArray.reverse()
        //folderID = documents.getElementById(docArray[docArray.length - 1]).parentElement.parentElement.parentElement.parentElement.id.replace("contents", "")
        //for (p = docArray.length - 1,c=1; p >= 0 && c<100; p--,c++) {
        //    let currentDoc = document.createElement("a")
        //    let currentDocId = documents.getElementById(docArray[p]).id.replace("d", "")
        //    let currentDocName = documents.getElementById(docArray[p]).innerText
        //    let currentDocUrl = doclink.replace("0000000", currentDocId)


        //    currentDoc.innerHTML = currentDocName
        //    currentDoc.href = currentDocUrl
        //    currentDoc.style.display="block"
        //    document.getElementById("docs").appendChild(currentDoc)
        //}
    </script>

</body>

</html>
